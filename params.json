{"name":"Stremio Add-ons","tagline":"Add-ons system for Stremio - server + client","body":"# stremio-addons\r\nAn Add-ons system that works like an RPC system, however it allows to **chain multiple Add-ons** and it automatically selects which addon to handle the call, depending on the arguments and the priority of add-ons (e.g. get a stream). You can also issue calls to all Add-ons and aggregate results (e.g. search metadata).\r\n\r\n#### Provides\r\n\r\n* **Add-on server library**: what we use to initialize an HTTP server that provides a Stremio add-on.\r\n* **Add-on client library**: a client library to use one or more Stremio add-ons\r\n\r\n## Client\r\n```javascript\r\nvar addons = require(\"stremio-addons\");\r\nvar stremio = new addons.Client({ /* options; picker: function(addons) { return addons } */ });\r\n// specify a picker function to filter / sort the addons we'll use\r\n\r\nstremio.setAuth(url, authKey); // Set the authentication for addons that require auth\r\n// URL is the URL to the central authentication server - some addons only permit certain servers\r\n// authKey is the authentication token (user session key) or an Add-on secret if we're authenticating from an Add-on Server\r\n\r\nstremio.add(URL, { priority: 0 }); // Priority is an integer, zero is the highest priority\r\n// OR\r\nstremio.add(URL);\r\n\r\nstremio.meta.get(args,cb); /* OR */ stremio.call(\"meta.get\", args, cb);\r\n\r\n// Events / hooks\r\nstremio.on(\"pick\", function(params) { \r\n\t// called when picking addons\r\n\t// params.addons - all addons; you can modify this. e.g. params.addons = params.addons.filter(...)\r\n\t// params.method - the method we're picking for\r\n\t\r\n\t// this can be used instead of picker\r\n});\r\n\r\nstremio.on(\"addon-ready\", function(addon, url) {\r\n\t// addon is an internal object - single Addon\r\n\t// url is the URL to it\r\n});\r\n```\r\n\r\n\r\n## Server\r\n```javascript\r\nvar addons = require(\"stremio-addons\");\r\nnew addons.Server({\r\n\t\"meta.get\": function(args, cb) {\r\n\t\t// this.user -> get info about the user\r\n\t},\r\n}, { secret: \"SOME SECRET - or leave undefined for test secret\" });\r\n```\r\n##### For the methods you can implement, and their expected input and output, see [methods](documentation/methods.md).\r\n\r\n## Authentication\r\nTo authenticate when using Stremio Addons as a client, one must call\r\n```javascript\r\nclient.setAuth(/* CENTRAL SERVER */, /* USER SESSION TOKEN (authToken) OR ADDON SECRET */);\r\n```\r\n\r\n**The authToken** is a session ID we use for addon clients to identify the user. The Addon Server (implemented in server.js) is responsible for evaluating if we're getting requests from a logged-in users. That happens by asking the **central server** if that authToken is valid and belongs to a user. \r\n\r\n**The secret** is a token, issued by a central server that we use to identify our Add-on server to the central server. We can also use our secret to identify ourselves to other Add-ons, if using them as a client - if our Add-on uses other Stremio add-ons under the hood (through the client library).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}